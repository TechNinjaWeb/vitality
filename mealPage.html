<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Bootstrap, from Twitter</title>
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0" />-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!-- Le styles -->
    <link data-require="bootstrap-css" data-semver="3.3.1" rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" />
    <link data-require="bootstrap@*" data-semver="3.3.5" rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
    <link data-require="bootstrap@*" data-semver="3.3.5" rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/cosmo/bootstrap.min.css" />
    <link data-require="bootstrap@*" data-semver="3.3.5" rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="style.css">
    <!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>-->
    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-latest.js"></script>
    <link href="style.css" rel="stylesheet" />
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Le fav and touch icons -->
    <!--<link rel="shortcut icon" href="images/favicon.ico" />-->
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png" />
    <!-- Le javascript
    ================================================== -->
    <script data-require="jquery" data-semver="2.1.4" src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script data-require="bootstrap" data-semver="3.3.5" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="script.js"></script>
    <script src="nutBuilderNew.js"></script>
</head>

<body id="mealPage">
  <div class="page-container">
      <nav class="navbar navbar-default navbar-fixed-top">
          <div class="header-container container">
              <div class="left-icon col-xs-4"><a href="index.html"><i class="fa fa-lg fa-home"></i></a></div>
              <div class="title col-xs-4">
                  <div class="nav-title text-center">Find a Meal</div>
              </div>
              <div class="right-icon col-xs-4 text-right"><a href="/mealList.html"><i class="fa fa-lg fa-list"></i></a></div>
          </div>
      </nav>
      <div class="heading col-xs-12">
          <h2 class="heading-title text-center">Choose A Type Of Goal To Begin</h2>
      </div>
      <div class="page-content container">
        <div class="search-box input-group col-xs-12 col-sm-6 pull-right">
            <input id="searchTerm" class="search-input form-control" type="text" placeholder="Search For A Meal or Food Item" value="" />
            <span class="input-group-btn"><button class="search-btn btn btn-primary">Search</button></span>
        </div>
        <div id="resultsList" class="links container"></div>
    <!-- <div class="goal-btns small-container">
      <a href="#" class="goal-btn-1 col-xs-12 btn btn-primary">Caloric Goal</a>
      <a href="#" class="goal-btn-2 col-xs-12 btn btn-success">Weight Goal</a>
      <a href="#" class="goal-btn-3 col-xs-12 btn btn-danger">Emotional Goal</a>
      <a href="#" class="goal-btn-4 col-xs-12 btn btn-info">Fitness Goal</a>
    </div> -->
      </div>
  </div>
  <script>
    // var searchTerm = document.getElementById('searchTerm');
    var searchBtn = document.getElementsByClassName('search-btn');

    searchBtn[0].addEventListener("click", function(e) {
        // console.log(["Search Button", searchBtn], ["Search Term Value", searchTerm.value]);
        var url = "/mealDescriptionPage.html";
        var term = e.target.parentNode.parentNode.children[0].value;
        // console.log("Search Term Value:", term);
        searchNutritionSiteFor(term).then(function(res){
          // console.log("Heres a rempose",res);
          var resultsList = document.getElementById('resultsList');
          res.forEach(function(e, i){
            var link = document.createElement('a');
                link.href = "#";
                link.innerHTML = e.name;
                link.className = "result col-xs-12 item-"+i;
                link.value = resultsList;
                link.data = e;
                link.addEventListener("click", function(ev){
                  // console.log("E", e, "URL", url);
                  var d = searchNutritionSiteFor(link.data.href, true).then(function(res){
                    // Sending you to your page
                    // console.log("SEND TO URL WITH DATA", res, url);
                    // alert("RES NAME " + e.name);
                    window.commands.sendData(url, {data: res, name: e.name});
                  });
                });

            resultsList.appendChild(link);

          });
        });

    });
  </script>
</body>

</html>